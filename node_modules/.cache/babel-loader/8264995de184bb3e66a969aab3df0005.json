{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nvar ActionButton = function ActionButton(props) {\n  var clickedRef = React.useRef(false);\n  var ref = React.useRef();\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    loading = _React$useState2[0],\n    setLoading = _React$useState2[1];\n  React.useEffect(function () {\n    var timeoutId;\n    if (props.autoFocus) {\n      var $this = ref.current;\n      timeoutId = setTimeout(function () {\n        return $this.focus();\n      });\n    }\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n    var closeModal = props.closeModal;\n    if (!returnValueOfOnOk || !returnValueOfOnOk.then) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      // It's unnecessary to set loading=false, for the Modal will be unmounted after close.\n      // setState({ loading: false });\n      closeModal.apply(void 0, arguments);\n    }, function (e) {\n      // Emit error when catch promise reject\n      // eslint-disable-next-line no-console\n      console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\n\n      setLoading(false);\n      clickedRef.current = false;\n    });\n  };\n  var onClick = function onClick() {\n    var actionFn = props.actionFn,\n      closeModal = props.closeModal;\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      closeModal();\n      return;\n    }\n    var returnValueOfOnOk;\n    if (actionFn.length) {\n      returnValueOfOnOk = actionFn(closeModal); // https://github.com/ant-design/ant-design/issues/23358\n\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!returnValueOfOnOk) {\n        closeModal();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  var type = props.type,\n    children = props.children,\n    prefixCls = props.prefixCls,\n    buttonProps = props.buttonProps;\n  return /*#__PURE__*/React.createElement(Button, _extends({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: ref\n  }), children);\n};\nexport default ActionButton;","map":{"version":3,"names":["_extends","_slicedToArray","React","Button","convertLegacyProps","ActionButton","props","clickedRef","useRef","ref","_React$useState","useState","_React$useState2","loading","setLoading","useEffect","timeoutId","autoFocus","$this","current","setTimeout","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","closeModal","then","apply","arguments","e","console","error","onClick","actionFn","length","type","children","prefixCls","buttonProps","createElement"],"sources":["D:/projects/CryptoIntel/node_modules/antd/es/modal/ActionButton.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\n\nvar ActionButton = function ActionButton(props) {\n  var clickedRef = React.useRef(false);\n  var ref = React.useRef();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  React.useEffect(function () {\n    var timeoutId;\n\n    if (props.autoFocus) {\n      var $this = ref.current;\n      timeoutId = setTimeout(function () {\n        return $this.focus();\n      });\n    }\n\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n\n  var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n    var closeModal = props.closeModal;\n\n    if (!returnValueOfOnOk || !returnValueOfOnOk.then) {\n      return;\n    }\n\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      // It's unnecessary to set loading=false, for the Modal will be unmounted after close.\n      // setState({ loading: false });\n      closeModal.apply(void 0, arguments);\n    }, function (e) {\n      // Emit error when catch promise reject\n      // eslint-disable-next-line no-console\n      console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\n\n      setLoading(false);\n      clickedRef.current = false;\n    });\n  };\n\n  var onClick = function onClick() {\n    var actionFn = props.actionFn,\n        closeModal = props.closeModal;\n\n    if (clickedRef.current) {\n      return;\n    }\n\n    clickedRef.current = true;\n\n    if (!actionFn) {\n      closeModal();\n      return;\n    }\n\n    var returnValueOfOnOk;\n\n    if (actionFn.length) {\n      returnValueOfOnOk = actionFn(closeModal); // https://github.com/ant-design/ant-design/issues/23358\n\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n\n      if (!returnValueOfOnOk) {\n        closeModal();\n        return;\n      }\n    }\n\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n\n  var type = props.type,\n      children = props.children,\n      prefixCls = props.prefixCls,\n      buttonProps = props.buttonProps;\n  return /*#__PURE__*/React.createElement(Button, _extends({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: ref\n  }), children);\n};\n\nexport default ActionButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}